<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—á—ë—Ç –¥–æ—Ö–æ–¥–æ–≤ TheGame</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Download = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
            </svg>
        );

        const Plus = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/>
            </svg>
        );

        const Trash = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
        );

        const Edit = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
        );

        const Calendar = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );

        const TrendingUp = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>
            </svg>
        );

        const BarChart = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/>
            </svg>
        );

        const Users = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
        );

        function FinanceTracker() {
            const [activeTab, setActiveTab] = useState('monthly');
            const [showModal, setShowModal] = useState(false);
            const [editingIndex, setEditingIndex] = useState(null);
            const [modalType, setModalType] = useState('monthly');
            
            const tabs = [
                { id: 'monthly', name: '–ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç', icon: Calendar },
                { id: 'expenses', name: '–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã', icon: TrendingUp },
                { id: 'passive', name: '–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥', icon: BarChart },
                { id: 'individual', name: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª–∫–∏', icon: Users },
                { id: 'summary', name: '–°–≤–æ–¥–∫–∞', icon: BarChart },
            ];

            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
            const loadData = (key, defaultData) => {
                const saved = localStorage.getItem(key);
                return saved ? JSON.parse(saved) : defaultData;
            };

            const [monthlyData, setMonthlyData] = useState(() => loadData('monthlyData', [
                { date: '25.11', location: '–ß–µ—Ä–∫–∏–∑–æ–≤—Å–∫–∞—è', type: '–î–æ–ª–≥–æ–ª–µ—Ç–∏–µ', teacher: '–Ø', people: 35, income: 9800, expense: 0, profit: 4900, note: '–ú–æ—è –≥—Ä—É–ø–ø–∞' },
                { date: '25.11', location: '–ß–µ—Ä–∫–∏–∑–æ–≤—Å–∫–∞—è', type: '–î–æ–ª–≥–æ–ª–µ—Ç–∏–µ', teacher: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞', people: 33, income: 9240, expense: 3220, profit: 4620, note: '50%-1400‚ÇΩ' },
                { date: '26.11', location: '–ë—É–¥–µ–Ω–Ω–æ–≥–æ', type: '–§–æ—Ä–º–µ–π—à–Ω', teacher: '–Ø', people: 20, income: 5600, expense: 0, profit: 5600, note: '' },
            ]));

            const [expenses, setExpenses] = useState(() => loadData('expenses', [
                { item: '–ê—Ä–µ–Ω–¥–∞ –ß–µ—Ä–∫–∏–∑–æ–≤—Å–∫–∞—è', amount: 0, comment: '–û–ø–ª–∞—á–∏–≤–∞—é—Ç –ø–µ–¥–∞–≥–æ–≥–∏' },
                { item: '–ö–æ–º–º—É–Ω–∞–ª–∫–∞ –ë—É–¥–µ–Ω–Ω–æ–≥–æ', amount: 20000, comment: '' },
                { item: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä', amount: 10000, comment: '~500‚ÇΩ √ó –¥–Ω–∏ –∞—Ä–µ–Ω–¥—ã' },
            ]));

            const [passive, setPassive] = useState(() => loadData('passive', [
                { source: '–í–∫–ª–∞–¥ 1', monthly: 85000, capital: 0, rate: 0 },
            ]));

            const [individual, setIndividual] = useState(() => loadData('individual', [
                { date: '25.11', client: '–ò–≤–∞–Ω –ü.', location: '–ë—É–¥–µ–Ω–Ω–æ–≥–æ', hours: 1.5, rate: 3000, income: 4500, note: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∫–æ–Ω–∫—É—Ä—Å—É' },
                { date: '26.11', client: '–ú–∞—Ä–∏—è –°.', location: '–í—ã–µ–∑–¥', hours: 1, rate: 5000, income: 5000, note: 'VIP' },
            ]));

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
            useEffect(() => { localStorage.setItem('monthlyData', JSON.stringify(monthlyData)); }, [monthlyData]);
            useEffect(() => { localStorage.setItem('expenses', JSON.stringify(expenses)); }, [expenses]);
            useEffect(() => { localStorage.setItem('passive', JSON.stringify(passive)); }, [passive]);
            useEffect(() => { localStorage.setItem('individual', JSON.stringify(individual)); }, [individual]);

            const [formData, setFormData] = useState({});

            const totalMonthlyIncome = monthlyData.reduce((sum, item) => sum + (item.income || 0), 0);
            const totalMonthlyExpense = monthlyData.reduce((sum, item) => sum + (item.expense || 0), 0);
            const totalMonthlyProfit = monthlyData.reduce((sum, item) => sum + (item.profit || 0), 0);
            const totalExpenses = expenses.reduce((sum, item) => sum + (item.amount || 0), 0);
            const totalPassive = passive.reduce((sum, item) => sum + (item.monthly || 0), 0);
            const totalIndividual = individual.reduce((sum, item) => sum + (item.income || 0), 0);
            const totalIndividualHours = individual.reduce((sum, item) => sum + (item.hours || 0), 0);

            const formatNumber = (num) => new Intl.NumberFormat('ru-RU').format(num);

            const openModal = (type, index = null) => {
                setModalType(type);
                setEditingIndex(index);
                
                if (index !== null) {
                    if (type === 'monthly') setFormData({...monthlyData[index]});
                    if (type === 'expenses') setFormData({...expenses[index]});
                    if (type === 'passive') setFormData({...passive[index]});
                    if (type === 'individual') setFormData({...individual[index]});
                } else {
                    setFormData({});
                }
                setShowModal(true);
            };

            const saveData = () => {
                if (modalType === 'monthly') {
                    const newData = {
                        date: formData.date || '',
                        location: formData.location || '',
                        type: formData.type || '',
                        teacher: formData.teacher || '',
                        people: parseInt(formData.people) || 0,
                        income: parseFloat(formData.income) || 0,
                        expense: parseFloat(formData.expense) || 0,
                        profit: parseFloat(formData.profit) || 0,
                        note: formData.note || ''
                    };
                    if (editingIndex !== null) {
                        const updated = [...monthlyData];
                        updated[editingIndex] = newData;
                        setMonthlyData(updated);
                    } else {
                        setMonthlyData([...monthlyData, newData]);
                    }
                }

                if (modalType === 'expenses') {
                    const newData = {
                        item: formData.item || '',
                        amount: parseFloat(formData.amount) || 0,
                        comment: formData.comment || ''
                    };
                    if (editingIndex !== null) {
                        const updated = [...expenses];
                        updated[editingIndex] = newData;
                        setExpenses(updated);
                    } else {
                        setExpenses([...expenses, newData]);
                    }
                }

                if (modalType === 'passive') {
                    const newData = {
                        source: formData.source || '',
                        monthly: parseFloat(formData.monthly) || 0,
                        capital: parseFloat(formData.capital) || 0,
                        rate: parseFloat(formData.rate) || 0
                    };
                    if (editingIndex !== null) {
                        const updated = [...passive];
                        updated[editingIndex] = newData;
                        setPassive(updated);
                    } else {
                        setPassive([...passive, newData]);
                    }
                }

                if (modalType === 'individual') {
                    const hours = parseFloat(formData.hours) || 0;
                    const rate = parseFloat(formData.rate) || 0;
                    const newData = {
                        date: formData.date || '',
                        client: formData.client || '',
                        location: formData.location || '',
                        hours: hours,
                        rate: rate,
                        income: hours * rate,
                        note: formData.note || ''
                    };
                    if (editingIndex !== null) {
                        const updated = [...individual];
                        updated[editingIndex] = newData;
                        setIndividual(updated);
                    } else {
                        setIndividual([...individual, newData]);
                    }
                }

                setShowModal(false);
                setFormData({});
            };

            const deleteItem = (type, index) => {
                if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?')) return;
                
                if (type === 'monthly') setMonthlyData(monthlyData.filter((_, i) => i !== index));
                if (type === 'expenses') setExpenses(expenses.filter((_, i) => i !== index));
                if (type === 'passive') setPassive(passive.filter((_, i) => i !== index));
                if (type === 'individual') setIndividual(individual.filter((_, i) => i !== index));
            };

            const exportToCSV = () => {
                let csv = '–£—á—ë—Ç –¥–æ—Ö–æ–¥–æ–≤ TheGame\n\n';
                csv += '–ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç\n';
                csv += '–î–∞—Ç–∞,–õ–æ–∫–∞—Ü–∏—è,–¢–∏–ø,–ü–µ–¥–∞–≥–æ–≥,–õ—é–¥–µ–π,–î–æ—Ö–æ–¥,–†–∞—Å—Ö–æ–¥,–ü—Ä–∏–±—ã–ª—å,–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ\n';
                monthlyData.forEach(row => {
                    csv += `${row.date},${row.location},${row.type},${row.teacher},${row.people},${row.income},${row.expense},${row.profit},${row.note}\n`;
                });
                
                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'finance_tracker.csv';
                link.click();
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white p-4">
                    <div className="max-w-7xl mx-auto">
                        <div className="mb-8">
                            <div className="flex items-center justify-between mb-4">
                                <div>
                                    <h1 className="text-3xl font-bold mb-2">üí∞ –£—á—ë—Ç –¥–æ—Ö–æ–¥–æ–≤ TheGame</h1>
                                    <p className="text-slate-400">–ü—É—Ç—å –æ—Ç 385–ö –∫ 1–ú | 2025-2026</p>
                                </div>
                                <button onClick={exportToCSV} className="flex items-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition">
                                    <Download />
                                    –≠–∫—Å–ø–æ—Ä—Ç
                                </button>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                <div className="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                    <div className="text-slate-400 text-sm mb-1">–¢–µ–∫—É—â–∏–π –¥–æ—Ö–æ–¥</div>
                                    <div className="text-2xl font-bold text-green-400">385,000‚ÇΩ</div>
                                </div>
                                <div className="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                    <div className="text-slate-400 text-sm mb-1">–¶–µ–ª—å (–¢–æ—á–∫–∞ –ë)</div>
                                    <div className="text-2xl font-bold text-blue-400">1,000,000‚ÇΩ</div>
                                </div>
                                <div className="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                    <div className="text-slate-400 text-sm mb-1">–ü—Ä–æ–≥—Ä–µ—Å—Å</div>
                                    <div className="text-2xl font-bold text-yellow-400">38.5%</div>
                                </div>
                                <div className="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                    <div className="text-slate-400 text-sm mb-1">–î–æ —Ü–µ–ª–∏</div>
                                    <div className="text-2xl font-bold text-red-400">615,000‚ÇΩ</div>
                                </div>
                            </div>
                        </div>

                        <div className="flex gap-2 mb-6 overflow-x-auto pb-2">
                            {tabs.map((tab) => {
                                const Icon = tab.icon;
                                return (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-lg transition whitespace-nowrap ${
                                            activeTab === tab.id ? 'bg-blue-600 text-white' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'
                                        }`}
                                    >
                                        <Icon />
                                        {tab.name}
                                    </button>
                                );
                            })}
                        </div>

                        <div className="bg-slate-800 rounded-lg border border-slate-700 p-6">
                            {activeTab === 'monthly' && (
                                <div>
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">üìÖ –ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç</h2>
                                        <button onClick={() => openModal('monthly')} className="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded text-sm transition">
                                            <Plus />
                                            –î–æ–±–∞–≤–∏—Ç—å
                                        </button>
                                    </div>
                                    
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-sm">
                                            <thead>
                                                <tr className="border-b border-slate-700">
                                                    <th className="text-left py-3 px-2">–î–∞—Ç–∞</th>
                                                    <th className="text-left py-3 px-2">–õ–æ–∫–∞—Ü–∏—è</th>
                                                    <th className="text-left py-3 px-2">–¢–∏–ø</th>
                                                    <th className="text-left py-3 px-2">–ü–µ–¥–∞–≥–æ–≥</th>
                                                    <th className="text-right py-3 px-2">–õ—é–¥–µ–π</th>
                                                    <th className="text-right py-3 px-2">–î–æ—Ö–æ–¥</th>
                                                    <th className="text-right py-3 px-2">–†–∞—Å—Ö–æ–¥</th>
                                                    <th className="text-right py-3 px-2">–ü—Ä–∏–±—ã–ª—å</th>
                                                    <th className="text-left py-3 px-2">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</th>
                                                    <th className="text-center py-3 px-2">–î–µ–π—Å—Ç–≤–∏—è</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {monthlyData.map((row, idx) => (
                                                    <tr key={idx} className="border-b border-slate-700/50 hover:bg-slate-700/30">
                                                        <td className="py-3 px-2">{row.date}</td>
                                                        <td className="py-3 px-2">{row.location}</td>
                                                        <td className="py-3 px-2">{row.type}</td>
                                                        <td className="py-3 px-2">{row.teacher}</td>
                                                        <td className="text-right py-3 px-2">{row.people}</td>
                                                        <td className="text-right py-3 px-2 text-green-400">{formatNumber(row.income)}‚ÇΩ</td>
                                                        <td className="text-right py-3 px-2 text-red-400">{formatNumber(row.expense)}‚ÇΩ</td>
                                                        <td className="text-right py-3 px-2 font-bold text-blue-400">{formatNumber(row.profit)}‚ÇΩ</td>
                                                        <td className="py-3 px-2 text-slate-400 text-xs">{row.note}</td>
                                                        <td className="py-3 px-2">
                                                            <div className="flex gap-2 justify-center">
                                                                <button onClick={() => openModal('monthly', idx)} className="text-blue-400 hover:text-blue-300">
                                                                    <Edit />
                                                                </button>
                                                                <button onClick={() => deleteItem('monthly', idx)} className="text-red-400 hover:text-red-300">
                                                                    <Trash />
                                                                </button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                            <tfoot className="bg-slate-900/50">
                                                <tr className="font-bold">
                                                    <td colSpan="5" className="py-3 px-2">–ò–¢–û–ì–û:</td>
                                                    <td className="text-right py-3 px-2 text-green-400">{formatNumber(totalMonthlyIncome)}‚ÇΩ</td>
                                                    <td className="text-right py-3 px-2 text-red-400">{formatNumber(totalMonthlyExpense)}‚ÇΩ</td>
                                                    <td className="text-right py-3 px-2 text-blue-400">{formatNumber(totalMonthlyProfit)}‚ÇΩ</td>
                                                    <td colSpan="2"></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'expenses' && (
                                <div>
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">üí∏ –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</h2>
                                        <button onClick={() => openModal('expenses')} className="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded text-sm transition">
                                            <Plus />
                                            –î–æ–±–∞–≤–∏—Ç—å
                                        </button>
                                    </div>
                                    <div className="overflow-x-auto">
                                        <table className="w-full">
                                            <thead>
                                                <tr className="border-b border-slate-700">
                                                    <th className="text-left py-3 px-2">–°—Ç–∞—Ç—å—è —Ä–∞—Å—Ö–æ–¥–∞</th>
                                                    <th className="text-right py-3 px-2">–°—É–º–º–∞/–º–µ—Å</th>
                                                    <th className="text-left py-3 px-2">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                                                    <th className="text-center py-3 px-2">–î–µ–π—Å—Ç–≤–∏—è</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {expenses.map((row, idx) => (
                                                    <tr key={idx} className="border-b border-slate-700/50">
                                                        <td className="py-3 px-2">{row.item}</td>
                                                        <td className="text-right py-3 px-2 text-red-400 font-semibold">{formatNumber(row.amount)}‚ÇΩ</td>
                                                        <td className="py-3 px-2 text-slate-400 text-sm">{row.comment}</td>
                                                        <td className="py-3 px-2">
                                                            <div className="flex gap-2 justify-center">
                                                                <button onClick={() => openModal('expenses', idx)} className="text-blue-400 hover:text-blue-300">
                                                                    <Edit />
                                                                </button>
                                                                <button onClick={() => deleteItem('expenses', idx)} className="text-red-400 hover:text-red-300">
                                                                    <Trash />
                                                                </button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                            <tfoot className="bg-slate-900/50">
                                                <tr className="font-bold">
                                                    <td className="py-3 px-2">–ò–¢–û–ì–û:</td>
                                                    <td className="text-right py-3 px-2 text-red-400">{formatNumber(totalExpenses)}‚ÇΩ</td>
                                                    <td colSpan="2"></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'passive' && (
                                <div>
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">üí∞ –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥</h2>
                                        <button onClick={() => openModal('passive')} className="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded text-sm transition">
                                            <Plus />
                                            –î–æ–±–∞–≤–∏—Ç—å
                                        </button>
                                    </div>
                                    <div className="overflow-x-auto">
                                        <table className="w-full">
                                            <thead>
                                                <tr className="border-b border-slate-700">
                                                    <th className="text-left py-3 px-2">–ò—Å—Ç–æ—á–Ω–∏–∫</th>
                                                    <th className="text-right py-3 px-2">–°—É–º–º–∞/–º–µ—Å</th>
                                                    <th className="text-right py-3 px-2">–ö–∞–ø–∏—Ç–∞–ª</th>
                                                    <th className="text-right py-3 px-2">–°—Ç–∞–≤–∫–∞ %</th>
                                                    <th className="text-center py-3 px-2">–î–µ–π—Å—Ç–≤–∏—è</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {passive.map((row, idx) => (
                                                    <tr key={idx} className="border-b border-slate-700/50">
                                                        <td className="py-3 px-2">{row.source}</td>
                                                        <td className="text-right py-3 px-2 text-green-400 font-semibold">{formatNumber(row.monthly)}‚ÇΩ</td>
                                                        <td className="text-right py-3 px-2">{row.capital ? formatNumber(row.capital) + '‚ÇΩ' : '‚Äî'}</td>
                                                        <td className="text-right py-3 px-2">{row.rate ? row.rate + '%' : '‚Äî'}</td>
                                                        <td className="py-3 px-2">
                                                            <div className="flex gap-2 justify-center">
                                                                <button onClick={() => openModal('passive', idx)} className="text-blue-400 hover:text-blue-300">
                                                                    <Edit />
                                                                </button>
                                                                <button onClick={() => deleteItem('passive', idx)} className="text-red-400 hover:text-red-300">
                                                                    <Trash />
                                                                </button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                            <tfoot className="bg-slate-900/50">
                                                <tr className="font-bold">
                                                    <td className="py-3 px-2">–ò–¢–û–ì–û:</td>
                                                    <td className="text-right py-3 px-2 text-green-400">{formatNumber(totalPassive)}‚ÇΩ</td>
                                                    <td colSpan="3"></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'individual' && (
                                <div>
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">üë§ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è</h2>
                                        <button onClick={() => openModal('individual')} className="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded text-sm transition">
                                            <Plus />
                                            –î–æ–±–∞–≤–∏—Ç—å
                                        </button>
                                    </div>
                                    
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-sm">
                                            <thead>
                                                <tr className="border-b border-slate-700">
                                                    <th className="text-left py-3 px-2">–î–∞—Ç–∞</th>
                                                    <th className="text-left py-3 px-2">–ö–ª–∏–µ–Ω—Ç</th>
                                                    <th className="text-left py-3 px-2">–õ–æ–∫–∞—Ü–∏—è</th>
                                                    <th className="text-right py-3 px-2">
