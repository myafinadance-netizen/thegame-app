<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>–ó–∞—Ä–ø–ª–∞—Ç—ã –ø–µ–¥–∞–≥–æ–≥–æ–≤ - –ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –¥–æ–ª–≥–æ–ª–µ—Ç–∏–µ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
      background: #0f172a; 
      color: #fff; 
      padding: 20px;
    }
    .container { max-width: 1400px; margin: 0 auto; }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 15px;
    }
    .header-left h1 { font-size: 28px; margin-bottom: 8px; }
    .subtitle { color: #94a3b8; }
    
    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .btn {
      background: #1e40af;
      color: #fff;
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    .btn:hover { background: #1e3a8a; transform: translateY(-1px); }
    .btn.secondary { background: #334155; }
    .btn.secondary:hover { background: #475569; }
    .btn.success { background: #059669; }
    .btn.success:hover { background: #047857; }
    .btn.small { padding: 6px 12px; font-size: 13px; }
    
    .stats { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
      gap: 15px; 
      margin-bottom: 30px; 
    }
    .stat-card {
      background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
      transition: transform 0.2s;
    }
    .stat-card:hover { transform: translateY(-2px); }
    .stat-card.green { background: linear-gradient(135deg, #065f46 0%, #047857 100%); }
    .stat-card.yellow { background: linear-gradient(135deg, #78350f 0%, #92400e 100%); }
    .stat-card.purple { background: linear-gradient(135deg, #581c87 0%, #6b21a8 100%); }
    
    .stat-label { 
      font-size: 11px; 
      text-transform: uppercase; 
      letter-spacing: 1px; 
      opacity: 0.8;
      margin-bottom: 8px;
    }
    .stat-value { font-size: 32px; font-weight: bold; }
    .stat-change {
      font-size: 12px;
      margin-top: 8px;
      opacity: 0.9;
    }
    
    .table-container {
      background: #1e293b;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 20px;
    }
    
    table { 
      width: 100%; 
      border-collapse: collapse;
    }
    th { 
      padding: 12px 8px; 
      text-align: left; 
      color: #cbd5e1; 
      font-size: 13px;
      border-bottom: 2px solid #334155;
    }
    td { 
      padding: 15px 8px; 
      border-bottom: 1px solid #334155;
    }
    tbody tr {
      transition: background 0.2s;
      cursor: pointer;
    }
    tbody tr:hover { background: #334155; }
    
    .teacher-name { font-weight: bold; font-size: 16px; }
    
    .badge {
      display: inline-block;
      background: #2563eb;
      color: #fff;
      padding: 6px 14px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 14px;
    }
    
    .amount { font-weight: bold; font-size: 15px; }
    .green { color: #4ade80; }
    .yellow { color: #fbbf24; }
    .blue { color: #60a5fa; }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      padding: 20px;
      overflow-y: auto;
    }
    .modal.active { display: flex; align-items: flex-start; justify-content: center; padding-top: 50px; }
    .modal-content {
      background: #1e293b;
      border-radius: 12px;
      padding: 30px;
      max-width: 1000px;
      width: 100%;
      max-height: 85vh;
      overflow-y: auto;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .modal-title { font-size: 20px; font-weight: bold; }
    .close-btn {
      background: none;
      border: none;
      color: #94a3b8;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
    }
    .close-btn:hover { color: #fff; }
    
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      color: #cbd5e1;
      font-size: 14px;
      margin-bottom: 5px;
      font-weight: 500;
    }
    .form-group input,
    .form-group select {
      width: 100%;
      background: #334155;
      border: 1px solid #475569;
      color: #fff;
      padding: 10px;
      border-radius: 6px;
      font-size: 14px;
    }
    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #3b82f6;
    }
    .form-actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      justify-content: flex-end;
    }
    
    .alert {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #1e293b;
      border-left: 4px solid #22c55e;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 2000;
      animation: slideInRight 0.3s ease;
    }
    .alert.error {
      border-left-color: #ef4444;
    }
    @keyframes slideInRight {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .info-box {
      background: rgba(59, 130, 246, 0.1);
      border-left: 4px solid #3b82f6;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .info-title { 
      font-weight: bold; 
      color: #93c5fd; 
      margin-bottom: 15px;
      font-size: 16px;
    }
    
    .preview-section {
      background: #334155;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    .preview-title {
      color: #93c5fd;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .preview-item {
      padding: 8px 0;
      border-bottom: 1px solid #475569;
    }
    .preview-item:last-child {
      border-bottom: none;
    }
    
    .schedule-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    .schedule-table th {
      background: #334155;
      padding: 10px;
      text-align: center;
      font-size: 12px;
      border: 1px solid #475569;
    }
    .schedule-table td {
      background: #1e293b;
      padding: 8px;
      text-align: center;
      font-size: 11px;
      border: 1px solid #475569;
      cursor: pointer;
      transition: all 0.2s;
      min-height: 60px;
      vertical-align: top;
    }
    .schedule-table td:hover {
      background: #334155;
    }
    .schedule-table td.has-class {
      background: rgba(59, 130, 246, 0.2);
    }
    .schedule-cell {
      min-height: 50px;
    }
    .schedule-class {
      background: rgba(59, 130, 246, 0.3);
      padding: 6px;
      border-radius: 4px;
      margin-bottom: 4px;
      border-left: 3px solid #3b82f6;
    }
    .schedule-teacher {
      font-weight: bold;
      font-size: 12px;
      margin-bottom: 2px;
    }
    .schedule-group {
      font-size: 10px;
      color: #94a3b8;
    }
    
    .upload-zone {
      border: 2px dashed #475569;
      border-radius: 12px;
      padding: 40px;
      text-align: center;
      background: rgba(59, 130, 246, 0.05);
      cursor: pointer;
      transition: all 0.3s;
    }
    .upload-zone:hover {
      border-color: #3b82f6;
      background: rgba(59, 130, 246, 0.1);
    }
    .upload-icon {
      font-size: 48px;
      margin-bottom: 15px;
    }
    .upload-text {
      color: #cbd5e1;
      font-size: 16px;
      margin-bottom: 8px;
    }
    .upload-hint {
      color: #94a3b8;
      font-size: 13px;
    }
    
    .text-center { text-align: center; }
    .text-right { text-align: right; }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in { animation: slideIn 0.3s ease; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-left">
        <h1>üíº –ó–∞—Ä–ø–ª–∞—Ç—ã –ø–µ–¥–∞–≥–æ–≥–æ–≤</h1>
        <div class="subtitle">–ü—Ä–æ–≥—Ä–∞–º–º–∞ "–ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –¥–æ–ª–≥–æ–ª–µ—Ç–∏–µ" - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—á–µ—Ç</div>
      </div>
      <div class="controls">
        <button class="btn success" onclick="showUploadModal()">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç—á–µ—Ç DOCX</button>
        <button class="btn" onclick="showScheduleModal()">üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
        <button class="btn" onclick="showGroupsModal()">üìã –ì—Ä—É–ø–ø—ã</button>
        <button class="btn secondary" onclick="exportData()">üì• –≠–∫—Å–ø–æ—Ä—Ç</button>
      </div>
    </div>
    
    <div class="stats fade-in" id="statsContainer"></div>
    
    <div class="table-container fade-in">
      <h2 style="margin-bottom: 20px;">üìä –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –ø–µ–¥–∞–≥–æ–≥–∞–º</h2>
      
      <table id="mainTable">
        <thead>
          <tr>
            <th>–ü–µ–¥–∞–≥–æ–≥</th>
            <th class="text-center">–ì—Ä—É–ø–ø</th>
            <th class="text-center">–ó–∞–Ω—è—Ç–∏–π</th>
            <th class="text-center">–í—Å–µ–≥–æ<br>–ª—é–¥–µ–π</th>
            <th class="text-right">–ì—Ä–∞–Ω—Ç<br>(–¥–æ—Ö–æ–¥)</th>
            <th class="text-right">–ó–∞—Ä–ø–ª–∞—Ç–∞</th>
            <th class="text-right">–ß–∏—Å—Ç–∞—è<br>–ø—Ä–∏–±—ã–ª—å</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
        <tfoot style="background: #0f172a; font-weight: bold;" id="tableFoot"></tfoot>
      </table>
    </div>
    
    <div class="info-box fade-in">
      <div class="info-title">üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π</div>
      <p style="color: #e2e8f0; line-height: 1.8;">
        <strong>1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:</strong> "üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ" ‚Üí —É–∫–∞–∂–∏—Ç–µ –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç<br>
        <strong>2. –î–æ–±–∞–≤—å—Ç–µ –≥—Ä—É–ø–ø—ã:</strong> "üìã –ì—Ä—É–ø–ø—ã" ‚Üí –ø—Ä–∏–≤—è–∂–∏—Ç–µ –∫–æ–¥ –≥—Ä—É–ø–ø—ã –∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é<br>
        <strong>3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ—Ç—á–µ—Ç:</strong> "üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å DOCX" ‚Üí —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –ø–µ–¥–∞–≥–æ–≥–∞ –ø–æ –¥–∞—Ç–µ –∏ –≤—Ä–µ–º–µ–Ω–∏!<br>
        <strong>4. –ì–æ—Ç–æ–≤–æ:</strong> –í—Å–µ –∑–∞–Ω—è—Ç–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤—è—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ–¥–∞–≥–æ–≥–∞–º–∏
      </p>
    </div>
  </div>
  
  <!-- Modal: Upload DOCX -->
  <div class="modal" id="uploadModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–∞</div>
        <button class="close-btn" onclick="closeModal('uploadModal')">√ó</button>
      </div>
      <div id="uploadContent">
        <div class="upload-zone" onclick="document.getElementById('docxFile').click()">
          <div class="upload-icon">üìÑ</div>
          <div class="upload-text">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ DOCX</div>
          <div class="upload-hint">–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏</div>
        </div>
        <input type="file" id="docxFile" accept=".docx" style="display: none;" onchange="handleFileUpload(event)">
      </div>
    </div>
  </div>
  
  <!-- Modal: Schedule -->
  <div class="modal" id="scheduleModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</div>
        <button class="close-btn" onclick="closeModal('scheduleModal')">√ó</button>
      </div>
      <div style="margin-bottom: 20px;">
        <button class="btn success" onclick="showAddScheduleModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
      </div>
      <div id="scheduleContent"></div>
    </div>
  </div>
  
  <!-- Modal: Add Schedule -->
  <div class="modal" id="addScheduleModal">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <div class="modal-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
        <button class="close-btn" onclick="closeModal('addScheduleModal')">√ó</button>
      </div>
      <form onsubmit="saveScheduleItem(event)">
        <div class="form-group">
          <label>–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ *</label>
          <select id="schedDay" required>
            <option value="1">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
            <option value="2">–í—Ç–æ—Ä–Ω–∏–∫</option>
            <option value="3">–°—Ä–µ–¥–∞</option>
            <option value="4">–ß–µ—Ç–≤–µ—Ä–≥</option>
            <option value="5">–ü—è—Ç–Ω–∏—Ü–∞</option>
            <option value="6">–°—É–±–±–æ—Ç–∞</option>
            <option value="0">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
          </select>
        </div>
        <div class="form-group">
          <label>–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ *</label>
          <input type="time" id="schedTime" value="09:00" required>
        </div>
        <div class="form-group">
          <label>–ì—Ä—É–ø–ø–∞ *</label>
          <select id="schedGroup" required>
            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É --</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="button" class="btn secondary" onclick="closeModal('addScheduleModal')">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Modal: Groups Management -->
  <div class="modal" id="groupsModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏</div>
        <button class="close-btn" onclick="closeModal('groupsModal')">√ó</button>
      </div>
      <div style="margin-bottom: 20px;">
        <button class="btn success" onclick="showAddGroupForm()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</button>
      </div>
      <div id="groupsList"></div>
    </div>
  </div>
  
  <!-- Modal: Add/Edit Group -->
  <div class="modal" id="groupFormModal">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <div class="modal-title" id="groupFormTitle">–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</div>
        <button class="close-btn" onclick="closeModal('groupFormModal')">√ó</button>
      </div>
      <form onsubmit="saveGroup(event)">
        <div class="form-group">
          <label>–ö–æ–¥ –≥—Ä—É–ø–ø—ã *</label>
          <input type="text" id="groupCode" placeholder="G-02250378" required>
        </div>
        <div class="form-group">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã *</label>
          <input type="text" id="groupName" placeholder="–¢–∞–Ω—Ü—ã" required>
        </div>
        <div class="form-group">
          <label>–ü–µ–¥–∞–≥–æ–≥ *</label>
          <input type="text" id="groupTeacher" placeholder="–ò–≤–∞–Ω–æ–≤–∞ –ú–∞—Ä–∏—è" required>
        </div>
        <div class="form-group">
          <label>–õ–æ–∫–∞—Ü–∏—è *</label>
          <input type="text" id="groupLocation" placeholder="–ë—É–¥–µ–Ω–Ω–æ–≥–æ" required>
        </div>
        <div class="form-group">
          <label>–¢–∏–ø –æ–ø–ª–∞—Ç—ã *</label>
          <select id="groupSalaryType" onchange="toggleSalaryLabel()">
            <option value="percent">–ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –¥–æ—Ö–æ–¥–∞</option>
            <option value="fixed">–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞</option>
          </select>
        </div>
        <div class="form-group">
          <label id="groupSalaryLabel">–ü—Ä–æ—Ü–µ–Ω—Ç (%) *</label>
          <input type="number" id="groupSalaryValue" min="0" step="0.01" placeholder="50" required>
        </div>
        <div class="form-group">
          <label>–ê—Ä–µ–Ω–¥–∞ –∑–∞–ª–∞ –∑–∞ –∑–∞–Ω—è—Ç–∏–µ (‚ÇΩ)</label>
          <input type="number" id="groupHallCost" min="0" value="0" placeholder="500">
        </div>
        <div class="form-actions">
          <button type="button" class="btn secondary" onclick="closeModal('groupFormModal')">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const GRANT_PER_PERSON = 280;
    const WEEKDAYS = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];
    
    let groups = [];
    let schedule = [];
    let sessions = [];
    
    function loadData() {
      groups = JSON.parse(localStorage.getItem('groups') || '[]');
      schedule = JSON.parse(localStorage.getItem('schedule') || '[]');
      sessions = JSON.parse(localStorage.getItem('sessions') || '[]');
      
      if (groups.length === 0) {
        groups = [
          {
            id: 1,
            code: "G-02250378",
            name: "–¢–∞–Ω—Ü—ã",
            teacher: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ò–≤–∞–Ω–æ–≤–∞",
            location: "–ë—É–¥–µ–Ω–Ω–æ–≥–æ",
            salaryType: "percent",
            salaryValue: 50,
            hallCost: 0
          }
        ];
      }
      
      if (schedule.length === 0) {
        schedule = [
          { id: 1, dayOfWeek: 1, time: "09:00", groupId: 1 }
        ];
      }
      
      updateDisplay();
    }
    
    function saveData() {
      localStorage.setItem('groups', JSON.stringify(groups));
      localStorage.setItem('schedule', JSON.stringify(schedule));
      localStorage.setItem('sessions', JSON.stringify(sessions));
    }
    
    function showAlert(message, type = 'success') {
      const alert = document.createElement('div');
      alert.className = `alert ${type === 'error' ? 'error' : ''}`;
      alert.textContent = message;
      document.body.appendChild(alert);
      
      setTimeout(() => {
        alert.style.animation = 'slideInRight 0.3s ease reverse';
        setTimeout(() => alert.remove(), 300);
      }, 3000);
    }
    
    function formatNumber(num) {
      return num.toLocaleString('ru-RU');
    }
    
    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }
    
    // === –ì–†–£–ü–ü–´ ===
    function showGroupsModal() {
      renderGroupsList();
      document.getElementById('groupsModal').classList.add('active');
    }
    
    function showAddGroupForm() {
      document.getElementById('groupFormTitle').textContent = '–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É';
      document.getElementById('groupCode').value = '';
      document.getElementById('groupName').value = '';
      document.getElementById('groupTeacher').value = '';
      document.getElementById('groupLocation').value = '';
      document.getElementById('groupSalaryType').value = 'percent';
      document.getElementById('groupSalaryValue').value = '50';
      document.getElementById('groupHallCost').value = '0';
      toggleSalaryLabel();
      document.getElementById('groupFormModal').classList.add('active');
      closeModal('groupsModal');
    }
    
    function toggleSalaryLabel() {
      const type = document.getElementById('groupSalaryType').value;
      document.getElementById('groupSalaryLabel').textContent = 
        type === 'percent' ? '–ü—Ä–æ—Ü–µ–Ω—Ç (%) *' : '–°—Ç–∞–≤–∫–∞ –∑–∞ –∑–∞–Ω—è—Ç–∏–µ (‚ÇΩ) *';
    }
    
    function renderGroupsList() {
      const container = document.getElementById('groupsList');
      
      if (groups.length === 0) {
        container.innerHTML = '<p style="color: #94a3b8; text-align: center; padding: 40px;">–ù–µ—Ç –≥—Ä—É–ø–ø. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –≥—Ä—É–ø–ø—É.</p>';
        return;
      }
      
      container.innerHTML = groups.map(g => `
        <div style="background: #334155; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <h3 style="font-size: 16px; margin-bottom: 5px;">${g.code} - ${g.name}</h3>
              <p style="color: #94a3b8; font-size: 13px;">
                üë§ ${g.teacher} ‚Ä¢ üìç ${g.location} ‚Ä¢ 
                ${g.salaryType === 'percent' ? g.salaryValue + '%' : g.salaryValue + '‚ÇΩ/–∑–∞–Ω—è—Ç–∏–µ'}
              </p>
            </div>
            <button class="btn secondary small" onclick="deleteGroup(${g.id})">üóëÔ∏è</button>
          </div>
        </div>
      `).join('');
    }
    
    function saveGroup(event) {
      event.preventDefault();
      
      const newGroup = {
        id: groups.length > 0 ? Math.max(...groups.map(g => g.id)) + 1 : 1,
        code: document.getElementById('groupCode').value.trim(),
        name: document.getElementById('groupName').value.trim(),
        teacher: document.getElementById('groupTeacher').value.trim(),
        location: document.getElementById('groupLocation').value.trim(),
        salaryType: document.getElementById('groupSalaryType').value,
        salaryValue: parseFloat(document.getElementById('groupSalaryValue').value),
        hallCost: parseFloat(document.getElementById('groupHallCost').value) || 0
      };
      
      groups.push(newGroup);
      saveData();
      closeModal('groupFormModal');
      showAlert('–ì—Ä—É–ø–ø–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
      showGroupsModal();
    }
    
    function deleteGroup(id) {
      if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –≥—Ä—É–ø–ø—É?')) return;
      groups = groups.filter(g => g.id !== id);
      saveData();
      renderGroupsList();
    }
    
    // === –†–ê–°–ü–ò–°–ê–ù–ò–ï ===
    function showScheduleModal() {
      renderSchedule();
      document.getElementById('scheduleModal').classList.add('active');
    }
    
    function showAddScheduleModal() {
      const select = document.getElementById('schedGroup');
      select.innerHTML = '<option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É --</option>' +
        groups.map(g => `<option value="${g.id}">${g.code} - ${g.name} (${g.teacher})</option>`).join('');
      
      document.getElementById('addScheduleModal').classList.add('active');
    }
    
    function renderSchedule() {
      const hours = ['09:00', '11:00', '13:00', '15:00', '17:00', '19:00'];
      
      let html = `
        <table class="schedule-table">
          <thead>
            <tr>
              <th style="width: 80px;">–í—Ä–µ–º—è</th>
              ${WEEKDAYS.slice(1).map(d => `<th>${d}</th>`).join('')}
            </tr>
          </thead>
          <tbody>
      `;
      
      hours.forEach(hour => {
        html += '<tr>';
        html += `<td style="font-weight: bold; background: #334155;">${hour}</td>`;
        
        for (let day = 1; day <= 6; day++) {
          const schedItem = schedule.find(s => s.dayOfWeek === day && s.time === hour);
          
          if (schedItem) {
            const group = groups.find(g => g.id === schedItem.groupId);
            html += `
              <td class="has-class">
                <div class="schedule-class">
                  <div class="schedule-teacher">${group?.teacher || '?'}</div>
                  <div class="schedule-group">${group?.code || '?'}</div>
                  <div class="schedule-group">${group?.name || '?'}</div>
                  <button class="btn secondary small" style="margin-top: 5px;" onclick="deleteSchedule(${schedItem.id})">üóëÔ∏è</button>
                </div>
              </td>
            `;
          } else {
            html += `<td onclick="quickAddSchedule(${day}, '${hour}')"><div style="color: #475569; font-size: 20px;">+</div></td>`;
          }
        }
        
        html += '</tr>';
      });
      
      html += '</tbody></table>';
      
      document.getElementById('scheduleContent').innerHTML = html;
    }
    
    function quickAddSchedule(day, time) {
      document.getElementById('schedDay').value = day;
      document.getElementById('schedTime').value = time;
      showAddScheduleModal();
    }
    
    function saveScheduleItem(event) {
      event.preventDefault();
      
      const day = parseInt(document.getElementById('schedDay').value);
      const time = document.getElementById('schedTime').value;
      const groupId = parseInt(document.getElementById('schedGroup').value);
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç
      const exists = schedule.find(s => s.dayOfWeek === day && s.time === time);
      if (exists) {
        showAlert('–í —ç—Ç–æ –≤—Ä–µ–º—è —É–∂–µ –µ—Å—Ç—å –∑–∞–Ω—è—Ç–∏–µ!', 'error');
        return;
      }
      
      schedule.push({
        id: schedule.length > 0 ? Math.max(...schedule.map(s => s.id)) + 1 : 1,
        dayOfWeek: day,
        time: time,
        groupId: groupId
      });
      
      saveData();
      closeModal('addScheduleModal');
      showAlert('–ó–∞–Ω—è—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ!', 'success');
      renderSchedule();
    }
    
    function deleteSchedule(id) {
      if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –∑–∞–Ω—è—Ç–∏–µ –∏–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è?')) return;
      schedule = schedule.filter(s => s.id !== id);
      saveData();
      renderSchedule();
      showAlert('–£–¥–∞–ª–µ–Ω–æ –∏–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è', 'success');
    }
    
    // === –ó–ê–ì–†–£–ó–ö–ê DOCX ===
    function showUploadModal() {
      document.getElementById('uploadContent').innerHTML = `
        <div class="upload-zone" onclick="document.getElementById('docxFile').click()">
          <div class="upload-icon">üìÑ</div>
          <div class="upload-text">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ DOCX</div>
          <div class="upload-hint">–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏</div>
        </div>
        <input type="file" id="docxFile" accept=".docx" style="display: none;" onchange="handleFileUpload(event)">
      `;
      document.getElementById('uploadModal').classList.add('active');
    }
    
    async function handleFileUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      showAlert('–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞...', 'success');
      
      try {
        const arrayBuffer = await file.arrayBuffer();
        const result = await mammoth.extractRawText({ arrayBuffer });
        const text = result.value;
        
        const parsedData = parseAttendanceReport(text);
        
        if (!parsedData) {
          showAlert('–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –æ—Ç—á–µ—Ç', 'error');
          return;
        }
        
        showPreview(parsedData);
        
      } catch (error) {
        showAlert('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞: ' + error.message, 'error');
      }
    }
    
    function parseAttendanceReport(text) {
      // –ò—â–µ–º –∫–æ–¥ –≥—Ä—É–ø–ø—ã
      const groupCodeMatch = text.match(/–∫–æ–¥\s+–≥—Ä—É–ø–ø—ã[:\s]+([A-Z]-\d+)/i) || text.match(/([A-Z]-\d{8})/);
      if (!groupCodeMatch) {
        showAlert('–ù–µ –Ω–∞–π–¥–µ–Ω –∫–æ–¥ –≥—Ä—É–ø–ø—ã –≤ –æ—Ç—á–µ—Ç–µ', 'error');
        return null;
      }
      
      const groupCode = groupCodeMatch[1];
      const group = groups.find(g => g.code === groupCode);
      
      if (!group) {
        showAlert(`–ì—Ä—É–ø–ø–∞ ${groupCode} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –î–æ–±–∞–≤—å—Ç–µ –µ—ë —Å–Ω–∞—á–∞–ª–∞.`, 'error');
        return null;
      }
      
      // –ò—â–µ–º –¥–∞—Ç—ã –∏ –≤—Ä–µ–º—è
      const lines = text.split('\n');
      const sessionData = [];
      
      // –ò—â–µ–º —Å—Ç—Ä–æ–∫—É —Å –¥–∞—Ç–∞–º–∏
      const dateLineIndex = lines.findIndex(line => /\d{2}\.\d{2}/.test(line));
      if (dateLineIndex === -1) {
        showAlert('–ù–µ –Ω–∞–π–¥–µ–Ω—ã –¥–∞—Ç—ã –≤ –æ—Ç—á–µ—Ç–µ', 'error');
        return null;
      }
      
      const dateLine = lines[dateLineIndex];
      const dateMatches = [...dateLine.matchAll(/(\d{2})\.(\d{2})[^\d]*(\d{2}):(\d{2})/g)];
      
      const dates = dateMatches.map(m => ({
        day: m[1],
        month: m[2],
        hour: m[3],
        minute: m[4]
      }));
      
      if (dates.length === 0) {
        showAlert('–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å –¥–∞—Ç—ã –∏ –≤—Ä–µ–º—è', 'error');
        return null;
      }
      
      // –î–ª—è –∫–∞–∂–¥–æ–π –¥–∞—Ç—ã —Å—á–∏—Ç–∞–µ–º –ø–ª—é—Å–∏–∫–∏
      dates.forEach(dateInfo => {
        const year = new Date().getFullYear();
        const dateStr = `${dateInfo.day}.${dateInfo.month}`;
        const timeStr = `${dateInfo.hour}:${dateInfo.minute}`;
        const fullDate = `${year}-${dateInfo.month}-${dateInfo.day}`;
        
        // –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ "+" –≤ —Å—Ç–æ–ª–±—Ü–µ —ç—Ç–æ–π –¥–∞—Ç—ã
        let count = 0;
        lines.forEach((line, idx) => {
          if (idx > dateLineIndex && line.includes('+')) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–æ–ª–±–µ—Ü –Ω—É–∂–Ω–æ–π –¥–∞—Ç—ã
            const parts = line.split(/\s+/);
            const dateIndex = dateLine.split(/\s+/).findIndex(p => p.includes(dateStr));
            if (dateIndex !== -1 && parts[dateIndex] === '+') {
              count++;
            }
          }
        });
        
        // –ü—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Å—á–µ—Ç –≤—Å–µ—Ö + –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ —Å –¥–∞—Ç–∞–º–∏
        if (count === 0) {
          const afterDates = lines.slice(dateLineIndex + 1).join('\n');
          const columns = afterDates.split(dateStr);
          if (columns.length > 1) {
            count = (columns[1].split('\n')[0].match(/\+/g) || []).length;
          }
        }
        
        if (count > 0) {
          // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥—Ä—É–ø–ø—É –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
          const date = new Date(year, parseInt(dateInfo.month) - 1, parseInt(dateInfo.day));
          const dayOfWeek = date.getDay();
          
          const schedItem = schedule.find(s => 
            s.dayOfWeek === dayOfWeek && 
            s.time === timeStr
          );
          
          const finalGroup = schedItem ? groups.find(g => g.id === schedItem.groupId) : group;
          
          sessionData.push({
            date: fullDate,
            time: timeStr,
            people: count,
            group: finalGroup || group,
            autoDetected: !!schedItem
          });
        }
      });
      
      return {
        sessions: sessionData
      };
    }
    
    function showPreview(data) {
      const { sessions: parsedSessions } = data;
      
      const totalPeople = parsedSessions.reduce((sum, s) => sum + s.people, 0);
      const totalIncome = totalPeople * GRANT_PER_PERSON;
      
      // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø–µ–¥–∞–≥–æ–≥–∞–º
      const byTeacher = {};
      parsedSessions.forEach(s => {
        const teacher = s.group.teacher;
        if (!byTeacher[teacher]) {
          byTeacher[teacher] = {
            teacher: teacher,
            sessions: [],
            income: 0,
            salary: 0
          };
        }
        
        byTeacher[teacher].sessions.push(s);
        const sessionIncome = s.people * GRANT_PER_PERSON;
        byTeacher[teacher].income += sessionIncome;
        
        if (s.group.salaryType === 'fixed') {
          byTeacher[teacher].salary += s.group.salaryValue;
        } else {
          byTeacher[teacher].salary += Math.round((sessionIncome * s.group.salaryValue) / 100);
        }
      });
      
      const content = `
        <div class="info-box" style="border-left-color: #22c55e;">
          <div class="info-title">‚úÖ –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω!</div>
        </div>
        
        <div class="preview-section">
          <div class="preview-title">üìä –ù–∞–π–¥–µ–Ω–æ –¥–∞–Ω–Ω—ã—Ö</div>
          <div class="preview-item"><strong>–ó–∞–Ω—è—Ç–∏–π:</strong> ${parsedSessions.length}</div>
          <div class="preview-item"><strong>–í—Å–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:</strong> ${totalPeople} —á–µ–ª.</div>
          <div class="preview-item"><strong>–û–±—â–∏–π –≥—Ä–∞–Ω—Ç:</strong> <span class="green">${formatNumber(totalIncome)}‚ÇΩ</span></div>
        </div>
        
        ${Object.values(byTeacher).map(t => `
          <div class="preview-section">
            <div class="preview-title">üë§ ${t.teacher}</div>
            <div class="preview-item"><strong>–ó–∞–Ω—è—Ç–∏–π:</strong> ${t.sessions.length}</div>
            <div class="preview-item"><strong>–ì—Ä–∞–Ω—Ç:</strong> <span class="green">${formatNumber(t.income)}‚ÇΩ</span></div>
            <div class="preview-item"><strong>–ó–∞—Ä–ø–ª–∞—Ç–∞:</strong> <span class="yellow">${formatNumber(t.salary)}‚ÇΩ</span></div>
            <div style="margin-top: 10px;">
              ${t.sessions.map(s => `
                <div style="padding: 5px; font-size: 12px; color: #cbd5e1; border-bottom: 1px solid #475569;">
                  ${s.date} ${s.time} ‚Ä¢ ${s.group.name} (${s.group.code}) ‚Ä¢ ${s.people} —á–µ–ª.
                  ${s.autoDetected ? '<span style="color: #4ade80;">‚úì –∞–≤—Ç–æ</span>' : ''}
                </div>
              `).join('')}
            </div>
          </div>
        `).join('')}
        
        <div class="form-actions" style="margin-top: 20px;">
          <button class="btn secondary" onclick="closeModal('uploadModal')">–û—Ç–º–µ–Ω–∞</button>
          <button class="btn success" onclick='confirmImport(${JSON.stringify(data).replace(/'/g, "&#39;")})'>‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∑–∞–Ω—è—Ç–∏—è</button>
        </div>
      `;
      
      document.getElementById('uploadContent').innerHTML = content;
    }
    
    function confirmImport(data) {
      data.sessions.forEach(s => {
        sessions.push({
          id: sessions.length + 1,
          groupId: s.group.id,
          date: s.date,
          time: s.time,
          people: s.people,
          teacher: s.group.teacher
        });
      });
      
      saveData();
      closeModal('uploadModal');
      updateDisplay();
      showAlert(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ ${data.sessions.length} –∑–∞–Ω—è—Ç–∏–π!`, 'success');
    }
    
    // === –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï ===
    function updateDisplay() {
      renderStats();
      renderTable();
    }
    
    function renderStats() {
      const totalSessions = sessions.length;
      const totalPeople = sessions.reduce((sum, s) => sum + s.people, 0);
      const totalIncome = totalPeople * GRANT_PER_PERSON;
      
      let totalSalary = 0;
      let totalHallCost = 0;
      
      sessions.forEach(s => {
        const group = groups.find(g => g.id === s.groupId);
        if (!group) return;
        
        const sessionIncome = s.people * GRANT_PER_PERSON;
        if (group.salaryType === 'fixed') {
          totalSalary += group.salaryValue;
        } else {
          totalSalary += Math.round((sessionIncome * group.salaryValue) / 100);
        }
        totalHallCost += group.hallCost;
      });
      
      const totalProfit = totalIncome - totalSalary - totalHallCost;
      
      const uniqueTeachers = new Set(sessions.map(s => s.teacher)).size;
      const uniqueGroups = new Set(sessions.map(s => s.groupId)).size;
      
      document.getElementById('statsContainer').innerHTML = `
        <div class="stat-card">
          <div class="stat-label">–ü–µ–¥–∞–≥–æ–≥–æ–≤</div>
          <div class="stat-value">${uniqueTeachers}</div>
          <div class="stat-change">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
        </div>
        <div class="stat-card purple">
          <div class="stat-label">–í—Å–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
          <div class="stat-value">${totalPeople}</div>
          <div class="stat-change">${totalSessions} –∑–∞–Ω—è—Ç–∏–π</div>
        </div>
        <div class="stat-card green">
          <div class="stat-label">–ì—Ä–∞–Ω—Ç</div>
          <div class="stat-value">${formatNumber(totalIncome)}‚ÇΩ</div>
          <div class="stat-change">${formatNumber(totalPeople)} √ó 280‚ÇΩ</div>
        </div>
        <div class="stat-card yellow">
          <div class="stat-label">–ó–∞—Ä–ø–ª–∞—Ç—ã</div>
          <div class="stat-value">${formatNumber(totalSalary)}‚ÇΩ</div>
          <div class="stat-change">–ù–∞—á–∏—Å–ª–µ–Ω–æ</div>
        </div>
      `;
    }
    
    function renderTable() {
      // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø–µ–¥–∞–≥–æ–≥–∞–º
      const byTeacher = {};
      
      sessions.forEach(s => {
        const teacher = s.teacher;
        if (!byTeacher[teacher]) {
          byTeacher[teacher] = {
            teacher: teacher,
            groups: new Set(),
            sessions: 0,
            people: 0,
            income: 0,
            salary: 0,
            hallCost: 0
          };
        }
        
        byTeacher[teacher].groups.add(s.groupId);
        byTeacher[teacher].sessions++;
        byTeacher[teacher].people += s.people;
        
        const group = groups.find(g => g.id === s.groupId);
        if (group) {
          const sessionIncome = s.people * GRANT_PER_PERSON;
          byTeacher[teacher].income += sessionIncome;
          
          if (group.salaryType === 'fixed') {
            byTeacher[teacher].salary += group.salaryValue;
          } else {
            byTeacher[teacher].salary += Math.round((sessionIncome * group.salaryValue) / 100);
          }
          
          byTeacher[teacher].hallCost += group.hallCost;
        }
      });
      
      const teacherData = Object.values(byTeacher).map(t => ({
        ...t,
        groups: t.groups.size,
        profit: t.income - t.salary - t.hallCost
      }));
      
      const tbody = document.getElementById('tableBody');
      const tfoot = document.getElementById('tableFoot');
      
      if (teacherData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #94a3b8; padding: 40px;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ—Ç—á–µ—Ç DOCX.</td></tr>';
        tfoot.innerHTML = '';
        return;
      }
      
      tbody.innerHTML = teacherData.map(t => `
        <tr>
          <td><div class="teacher-name">${t.teacher}</div></td>
          <td class="text-center"><span class="badge">${t.groups}</span></td>
          <td class="text-center">${t.sessions}</td>
          <td class="text-center"><span class="badge" style="background: #7c3aed;">${t.people}</span></td>
          <td class="text-right"><span class="amount green">${formatNumber(t.income)}‚ÇΩ</span></td>
          <td class="text-right"><span class="amount yellow">${formatNumber(t.salary)}‚ÇΩ</span></td>
          <td class="text-right"><span class="amount blue">${formatNumber(t.profit)}‚ÇΩ</span></td>
        </tr>
      `).join('');
      
      const totals = {
        groups: new Set(sessions.map(s => s.groupId)).size,
        sessions: sessions.length,
        people: sessions.reduce((sum, s) => sum + s.people, 0),
        income: teacherData.reduce((sum, t) => sum + t.income, 0),
        salary: teacherData.reduce((sum, t) => sum + t.salary, 0),
        profit: teacherData.reduce((sum, t) => sum + t.profit, 0)
      };
      
      tfoot.innerHTML = `
        <tr>
          <td>–ò–¢–û–ì–û:</td>
          <td class="text-center blue">${totals.groups}</td>
          <td class="text-center">${totals.sessions}</td>
          <td class="text-center purple">${totals.people}</td>
          <td class="text-right green">${formatNumber(totals.income)}‚ÇΩ</td>
          <td class="text-right yellow">${formatNumber(totals.salary)}‚ÇΩ</td>
          <td class="text-right blue">${formatNumber(totals.profit)}‚ÇΩ</td>
        </tr>
      `;
    }
    
    function exportData() {
      const data = {
        groups: groups,
        schedule: schedule,
        sessions: sessions,
        exportDate: new Date().toISOString()
      };
      
      const dataStr = JSON.stringify(data, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `–¥–æ–ª–≥–æ–ª–µ—Ç–∏–µ_${new Date().toISOString().split('T')[0]}.json`;
      link.click();
      URL.revokeObjectURL(url);
      showAlert('–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!');
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    window.addEventListener('click', function(e) {
      if (e.target.classList.contains('modal')) {
        e.target.classList.remove('active');
      }
    });
    
    loadData();
  </script>
</body>
</html>
